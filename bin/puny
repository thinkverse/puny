#!/usr/bin/env php
<?php

use Puny\Puny;
use Puny\Support\Console;

define('PUNY_VERSION', '0.1.0');

(static function () use ($argv) {
    $vendorPath = dirname(__DIR__, 4) . '/vendor/autoload.php';
    $localPath = dirname(__DIR__) . '/vendor/autoload.php';

    if (is_readable($vendorPath)) {
        require_once $vendorPath;
    } else {
        require_once $localPath;
    }

    $puny = Puny::instance();

    if (count($argv) >= 2) {
        [, $folder] = $argv;

        $puny->setRoot($folder);

        if (in_array('--filter', $argv)) {
            $puny->filterBy($argv[array_search('--filter', $argv) + 1]);
        }
    } else {
        $puny->setRoot(getcwd() . '/tests');
    }

    $puny->run();
})();
